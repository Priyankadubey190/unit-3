<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<style>

    img {

        width: 30%;
        height: 150px
    }
    .gmap_canvas {
            overflow: hidden;
            background: none !important;
            height: 500px;
            width: 600px;
        }


        .mapouter {
            text-align: right;
            height: 500px;
            width: 600px;
        }
        .outer{
            display: flex;
            justify-content: space-between;
        }
        img{
            height: 50px;
            float: left;
        }
      
       #week{
           display: flex;
           width: 90%;
           margin: auto;
           justify-content: space-between;
       }
       #img1{
           height: 180px;
           width: 100px;
       }
</style>

<body>
    <h1>Get Perticular City Weather Information</h1>
    <input type="text" id="city" placeholder="Enter city name"> 
    <button onclick="getweather()">Search</button>
    <div class="outer">
        <div id="data"></div>
        
        <div id="conta">
    
            <div id="weatherData"></div>
            <div class="mapouter">
                <div class="gmap_canvas"><iframe width="600" height="500" id="gmap_canvas" frameborder="0" scrolling="no"
                        marginheight="0" marginwidth="0"></iframe><a href="https://fmovies-online.net">fmovies</a><br>
                    <a href="https://www.embedgooglemap.net">integrate google maps into website</a>
    
                </div>
            </div>
    
        </div>
        
    </div>
    <div id="week">

    </div>

</body>
</html>
<script>
    var container = document.getElementById("data");
    var latu;
    var long;
    
    
    async function getweather() {
        
        try {
            var city = document.getElementById("city").value;
            document.querySelector("iframe").src = `https://maps.google.com/maps?q=${city}&t=&z=13&ie=UTF8&iwloc=&output=embed`;

            let res = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=145101b05726f77eb681835f2f85fe84&units=metric`);

            
            data = await res.json();
           
            console.log(data)
             latu = data.coord.lat;
             long = data.coord.lon;
            console.log(latu,long);
            appendProducts(data);
            console.log("Hello");

            let seven = await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${latu}&lon=${long}&appid=058fc9b03d0c09940d2cba5124b0a926&units=metric`);
            
            var sedata = await seven.json();
             sedata = sedata.daily
              appendWeather(sedata)
             console.log("seven",sedata)
             
             console.log("Hello");
         
        }
        catch (err) {
            console.log("err:", err);
        }
    }
    console.log("Hello hi");
    
    function appendProducts(d) {
       let div = document.createElement("div");
            let tem = document.createElement("h2");
            tem.innerText = `Temperature : ${d.main.temp}`
            let p1 = document.createElement("h2");
            p1.textContent = `Pressure : ${d.main.pressure}`
            let p2 = document.createElement("h2");
            p2.textContent = `Humidity : ${d.main.humidity}`
            let p3 = document.createElement("h2");
            p3.textContent = `Maximum Temprechure : ${d.main.temp_max}`
            let temdiv = document.createElement("div");
            let p4 = document.createElement("div");
            let spam =document.createElement("h2")
            spam.setAttribute("class","spam")
            p4.setAttribute("class","img")
            let img = document.createElement("img")

            img.src = "https://image.shutterstock.com/image-vector/sunset-landscape-lake-clouds-on-600w-1923503654.jpg"
            // p4.innerHTML = "Minimum Temprechure"+ " "+img+" " +d.main.temp_min
            spam.textContent = "Minimum Temprechure"+" " +d.main.temp_min
            p4.append(img);
            temdiv.append(p4,spam)
            let p5 = document.createElement("h2");
            p5.textContent = `Wind : ${d.wind.speed}`
            let p6 = document.createElement("h2");
            p6.textContent = `Clouds : ${d.clouds.all}`
            div.append(tem,p1,p2,p3,temdiv,p5,p6)
            
            container.appendChild(div);


        }
    
    function appendWeather(deep) {
        document.querySelector("#week").innerHTML = ""
        deep.forEach(function (ele) {

            var x = Number(ele.temp.max)
            let max = document.createElement("h3")
            max.textContent = ele.temp.max + "°"

            let min = document.createElement("h3")
            min.textContent = ele.temp.min + "°"
            var img = document.createElement("img")
            img.setAttribute("id", "img1")
            if (x > 28) {

                img.src = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSgLIH1aiLgPy6g2Y9Sy520fBuX-uzn7ZMnkw&usqp=CAU"
            }
            else if (x > 27 && x <= 28) {

                img.src = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT8ilOQkNt4q3zAauFDNCG6W9RLIpHA1kVXLw&usqp=CAU"
            }
            else if (x < 27) {

                img.src = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSeukrih2WpIlo6RhtWI0FaV4kb9j7_QYZDGQ&usqp=CAU"
            }
            var z = document.createElement("div")
            var a = document.createElement("div")
            var b = document.createElement("div")
            b.setAttribute("class","b")
            z.append(img)
            a.append(max, min);
            b.append(z, a)
            document.getElementById("week").append(b)

        });

    }
</script>

